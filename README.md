# lain-day

> "我并非在回到过去。我是在进行一次‘数字考古’，挖掘被现代图形技术所遮蔽的、独特的审美和体验。"

`lain-day` 是一个在真实的终端（Terminal）环境中运行的交互式小说游戏。它的灵感来源于动画《玲音》（*Serial Experiments Lain*）的深层主题，旨在探索一种复古未来主义（Retrofuturism）的叙事方式。

## 项目定位与开发哲学

### 定位：独立游戏项目 (Independent Game Project)

`lain-day` 是一个由单人开发的独立游戏项目。它并非一个纯粹为了学习或技术实验的个人作品，而是致力于成为一个面向公众的、完整的、具有独特艺术表达的互动叙事体验。项目的每一个设计决策都服务于这个最终的产品愿景。

### 核心理念：用终端模拟游戏，而非用游戏引擎模拟终端

这个项目的核心哲学是 **“用终端模拟游戏，而非用游戏引擎模拟终端”**。我们拥抱终端的限制，并将其作为创作的画笔，以挖掘一种更直接、更接近机器本质的交互体验。

### 开发哲学：拥抱“脆弱性”的快速失效 (Fail-Fast)

在单人开发模式下，开发效率和心流的保持至关重要。因此，本项目采用了一种“快速失效”的开发哲学，即**“让错误尽量在开发环节暴露，而不是在测试环节发现”**。

这体现在引擎设计的多个方面，例如场景调度的标识符（`scene_id`）。系统刻意设计得“脆弱”：当一个错误的标识符出现时，程序会立刻以明确的方式失败（例如崩溃或打印清晰的错误信息）。这种设计避免了错误被“静默”处理，从而防止了开发者在数小时或数天后才在一个不相关的测试中发现问题。

对于个人项目而言，后期调试的上下文切换成本极高。因此，这种看似“脆弱”的设计，实际上是一种保障开发效率和项目顺利推进的**纪律性工具**。

## 技术演进

本项目的技术选型演变，是其核心理念的直接体现。

### 第一阶段：Python - 快速原型与灵活性

项目最初采用Python开发，以利用其在数据处理和原型构建上的优势，快速将叙事和玩法的设计想法转化为可运行的原型。Python是实现这个项目从“0到1”的完美工具。

### 第二阶段：转向C语言 - 追求控制与性能

随着开发的深入，为了实现一个流畅、色彩丰富的终端界面，并回归“用终端模拟游戏”的哲学初衷，我们必须获得对**文本流（text stream）的底层控制能力**。C语言为我们提供了这种必需的、精确到字节的控制力。因此，项目当前及未来的开发，将**完全聚焦于C语言实现**。

## 当前开发状态

项目目前为一个功能性的C语言引擎，其核心架构如下：

-   **引擎核心**：使用C语言编写，负责游戏主循环、状态管理、输入输出和动作执行。
-   **构建系统**：使用 `CMake` 进行项目构建。
-   **数据驱动**：核心游戏内容（场景、动作、物品等）由外部的 `.ssl` (YAML) 和 `.json` 文件驱动，保持了内容创作的灵活性。
-   **第三方库**：目前集成了 `cJSON` 用于解析数据文件，以及 `zlib` 用于压缩功能。

一份详细、实时更新的开发状态清单（包括已完成、未完成和待办的功能）记录在 `include/project_status.h` 文件中。建议直接查阅该文件以了解项目进展的最新细节。

## 开发环境与平台策略

### 主开发环境

本项目目前主要在 **Android 设备的 Termux 环境**下进行开发和测试。

### 平台策略

当前阶段，由于叙事内容和核心框架尚未完全定型，项目采取**单平台优先**的策略。这意味着所有测试和迭代都将集中在 Termux 环境中完成，以最大化开发效率，减少多平台兼容性带来的额外负担。

只有在核心叙事和框架稳定之后，才会考虑和解决多平台（如 Windows, Linux）的兼容性问题。此策略旨在让单人开发者能够更专注地推进项目的核心开发。

## 核心玩法与命令

游戏通过一个类似 `shell` 的界面进行交互。玩家通过输入命令来探索世界、与物品互动和推进故事。

-   **`arls` (Area List Scan):** 这是最核心的环境扫描命令。它会显示当前地点的描述、所有可观察的“兴趣点”（Points of Interest），以及所有可用的“连接”（Connections）或出口。
-   **`exper <id>` (Experiment):** 用于与“兴趣点”进行互动。`id` 通常通过 `arls` 命令获得。例如，如果 `arls` 显示一个 `id` 为 `navi_computer` 的兴趣点，输入 `exper navi_computer` 就会尝试与之互动。
-   **`move <destination>`:** 用于在不同地点之间移动。`destination` 是一个地点的 `action_id`，可以通过 `arls` 命令在“Connections”列表中找到。例如，如果 `arls` 显示一个连接是 `downstairs -> iwakura_lower_hallway`，那么输入 `move downstairs` 就会移动到楼下。
-   **`help`:** 显示所有已解锁的可用命令。
-   **`inventory` / `inv`:** 查看玩家当前的物品。
-   **`time`:** 查看当前游戏内的时间。

## 构建与运行

```bash
# 1. 创建并进入build目录
mkdir -p build
cd build

# 2. 运行CMake生成构建文件
cmake ..

# 3. 编译项目
make

# 4. 运行游戏
./lain-day
```

游戏启动后，会提示您输入一个“会话名称”。您可以输入一个新名称来开始新游戏，或输入已有的名称来继续之前的游戏。所有游戏存档都保存在 `session/` 目录下，以会话名区分。